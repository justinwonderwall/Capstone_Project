<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student & Revenue Forecasting Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Neutrals (Light beige background, dark gray text, with muted blue and teal as accent colors) -->
    <!-- Application Structure Plan: A single-page application with a tab-based navigation ('Overview', 'Student Lifecycle', 'Financial Insights'). This structure directly translates the three distinct analytical sections from the Power BI plan into a focused, user-friendly SPA format. It prevents cognitive overload from a long scroll page and allows users to concentrate on one theme at a time. The active tab's content is displayed, containing KPI cards, interactive charts, and filters as specified. This design choice optimizes usability by providing clear, separated contexts for different analytical goals. -->
    <!-- Visualization & Content Choices: KPIs (Inform -> Styled HTML -> Non-interactive -> Clear stats), Funnel (Organize -> Chart.js Bar Chart -> Non-interactive -> Simulates funnel), Enrolment Trend (Change -> Chart.js Stacked Area -> Tooltips -> Shows composition over time), Revenue Trend (Change -> Chart.js Line -> Tooltips -> Tracks revenue), Filters (Interact -> HTML Select -> JS updates -> Cohort drill-down), Retention/Dropout (Compare -> Chart.js Dual-Axis Line -> Tooltips -> Compares two metrics), Student Journey (Organize -> Custom HTML/CSS Flow -> JS updates on filter -> Accessible alternative to Sankey), GPA Distribution (Organize -> Chart.js Bar -> Tooltips -> Performance distribution), Revenue Breakdown (Compare -> Chart.js Doughnut -> Tooltips -> Proportional contribution), Scholarship Distribution (Compare -> Chart.js Doughnut -> Tooltips -> Allocation proportions), Revenue Forecast (Change/Inform -> Chart.js Line -> Tooltips -> Visualizes historical data, ML forecast, and confidence). -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F7F4;
            color: #333D47;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 300px;
            }
        }
        .nav-button {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-button.active {
            border-bottom-color: #14B8A6;
            color: #14B8A6;
            font-weight: 600;
        }
        .kpi-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            border: 1px solid #E5E7EB;
        }
        .chart-card {
            background-color: #FFFFFF;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            border: 1px solid #E5E7EB;
        }
        .sankey-node {
            background-color: #e0f2f1;
            border-left: 5px solid #14B8A6;
        }
        .sankey-path {
            position: relative;
            flex-grow: 1;
            background: repeating-linear-gradient(45deg, #a7f3d0, #a7f3d0 10px, #d1fae5 10px, #d1fae5 20px);
            opacity: 0.6;
            height: 8px;
            margin: auto 0;
        }
    </style>
</head>
<body class="antialiased">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Student & Revenue Forecasting</h1>
            <p class="text-lg text-gray-500 mt-1">Interactive Dashboard</p>
        </header>

        <nav class="flex justify-center border-b border-gray-200 mb-8">
            <button id="btn-overview" class="nav-button py-4 px-6 text-lg text-gray-500 hover:text-teal-600 active">Overview</button>
            <button id="btn-lifecycle" class="nav-button py-4 px-6 text-lg text-gray-500 hover:text-teal-600">Student Lifecycle</button>
            <button id="btn-financials" class="nav-button py-4 px-6 text-lg text-gray-500 hover:text-teal-600">Financial Insights</button>
        </nav>

        <main>
            <!-- Page 1: Overview -->
            <div id="page-overview" class="space-y-8">
                <section>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Total Applications</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">85,320</p>
                        </div>
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Total Enrolments</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">12,780</p>
                        </div>
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Total Revenue</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">$2.1B</p>
                        </div>
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Avg. Scholarship</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">$5,250</p>
                        </div>
                    </div>
                </section>
                <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                     <div class="chart-card">
                        <h2 class="text-xl font-semibold text-center mb-4">Application Funnel</h2>
                        <p class="text-center text-gray-500 mb-4 text-sm">This chart visualizes the conversion rate at each stage of the student acquisition process, from initial application to final enrolment.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="funnelChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h2 class="text-xl font-semibold text-center mb-4">Student Enrolment Trend</h2>
                        <p class="text-center text-gray-500 mb-4 text-sm">This chart shows the growth and composition of the student body over time, distinguished by domestic and international students.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="enrolmentTrendChart"></canvas>
                        </div>
                    </div>
                </section>
                <section class="chart-card">
                    <h2 class="text-xl font-semibold text-center mb-4">Revenue Trend by Program Level</h2>
                    <p class="text-center text-gray-500 mb-4 text-sm">Track revenue growth over the past five years and identify which academic levels are the biggest financial contributors.</p>
                    <div class="chart-container" style="height:350px;">
                        <canvas id="revenueTrendChart"></canvas>
                    </div>
                </section>
            </div>

            <!-- Page 2: Student Lifecycle -->
            <div id="page-lifecycle" class="hidden space-y-8">
                 <section class="bg-white p-6 rounded-lg shadow-sm border border-gray-200">
                    <h2 class="text-xl font-semibold text-center mb-4">Cohort Analysis</h2>
                    <p class="text-center text-gray-500 mb-6 text-sm">Use the filters below to analyze the progression, academic performance, and retention of specific student cohorts.</p>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div>
                            <label for="filter-year" class="block text-sm font-medium text-gray-700">Enrolment Year</label>
                            <select id="filter-year" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md">
                                <option>2023</option>
                                <option>2022</option>
                                <option>2021</option>
                                <option>2020</option>
                            </select>
                        </div>
                        <div>
                            <label for="filter-level" class="block text-sm font-medium text-gray-700">Program Level</label>
                            <select id="filter-level" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md">
                                <option>All</option>
                                <option>Undergraduate</option>
                                <option>Master's</option>
                                <option>PhD</option>
                            </select>
                        </div>
                         <div>
                            <label for="filter-type" class="block text-sm font-medium text-gray-700">Student Type</label>
                            <select id="filter-type" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md">
                                <option>All</option>
                                <option>Domestic</option>
                                <option>International</option>
                            </select>
                        </div>
                         <div>
                            <label for="filter-mode" class="block text-sm font-medium text-gray-700">Study Mode</label>
                            <select id="filter-mode" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-md">
                                <option>All</option>
                                <option>Onshore</option>
                                <option>Offshore</option>
                                <option>Online</option>
                            </select>
                        </div>
                    </div>
                </section>
                <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="chart-card">
                         <h2 class="text-xl font-semibold text-center mb-4">Retention & Dropout Rates</h2>
                         <p class="text-center text-gray-500 mb-4 text-sm">This chart monitors student retention and attrition trends for the selected cohort over their typical study period.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="retentionChart"></canvas>
                        </div>
                    </div>
                     <div class="chart-card">
                        <h2 class="text-xl font-semibold text-center mb-4">Academic Performance</h2>
                        <p class="text-center text-gray-500 mb-4 text-sm">A distribution of Grade Point Averages (GPA) for the selected cohort, providing insight into their academic success.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="gpaChart"></canvas>
                        </div>
                    </div>
                </section>
                <section class="chart-card">
                    <h2 class="text-xl font-semibold text-center mb-4">Student Journey Flow</h2>
                    <p class="text-center text-gray-500 mb-6 text-sm">This visualization illustrates the flow of a student cohort through the entire lifecycle, from receiving an offer to graduation.</p>
                    <div id="sankey-container" class="flex items-center justify-between space-x-2 text-center text-sm">
                        <div class="sankey-node p-4 rounded-md w-1/5"><strong>Offer</strong><p id="sankey-offer" class="text-lg font-bold">100%</p></div>
                        <div class="sankey-path"></div>
                        <div class="sankey-node p-4 rounded-md w-1/5"><strong>Accepted</strong><p id="sankey-accepted" class="text-lg font-bold">75%</p></div>
                        <div class="sankey-path"></div>
                        <div class="sankey-node p-4 rounded-md w-1/5"><strong>Enrolled</strong><p id="sankey-enrolled" class="text-lg font-bold">68%</p></div>
                        <div class="sankey-path"></div>
                        <div class="sankey-node p-4 rounded-md w-1/5"><strong>Retained</strong><p id="sankey-retained" class="text-lg font-bold">60%</p></div>
                        <div class="sankey-path"></div>
                        <div class="sankey-node p-4 rounded-md w-1/5"><strong>Graduated</strong><p id="sankey-graduated" class="text-lg font-bold">55%</p></div>
                    </div>
                </section>
            </div>

            <!-- Page 3: Financial Insights -->
            <div id="page-financials" class="hidden space-y-8">
                 <section>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Tuition Fee Revenue</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">$1.95B</p>
                        </div>
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Revenue per Student</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">$152,582</p>
                        </div>
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Total Scholarship Cost</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">$67.1M</p>
                        </div>
                        <div class="kpi-card text-center">
                            <h3 class="text-gray-500 font-medium text-lg">Scholarship as % of Rev</h3>
                            <p class="text-4xl font-bold text-gray-800 mt-2">3.4%</p>
                        </div>
                    </div>
                </section>
                <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="chart-card">
                         <h2 class="text-xl font-semibold text-center mb-4">Revenue Breakdown</h2>
                         <p class="text-center text-gray-500 mb-4 text-sm">Explore the composition of total revenue, broken down by program level and student type.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="revenueBreakdownChart"></canvas>
                        </div>
                    </div>
                     <div class="chart-card">
                        <h2 class="text-xl font-semibold text-center mb-4">Scholarship Distribution</h2>
                        <p class="text-center text-gray-500 mb-4 text-sm">This chart identifies which academic programs account for the largest shares of scholarship and fee waiver costs.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="scholarshipDistChart"></canvas>
                        </div>
                    </div>
                </section>
                <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="chart-card">
                        <h2 class="text-xl font-semibold text-center mb-4">Revenue Forecast (Next 5 Years)</h2>
                        <p class="text-center text-gray-500 mb-4 text-sm">This chart displays the output of the predictive model, showing expected revenue trends based on enrolment forecasts.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="forecastChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h2 class="text-xl font-semibold text-center mb-4">Student Enrolment Forecast (Next 5 Years)</h2>
                        <p class="text-center text-gray-500 mb-4 text-sm">This chart displays the enrolment forecast, which is a key driver for the revenue projection.</p>
                        <div class="chart-container" style="height:350px;">
                            <canvas id="studentForecastChart"></canvas>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const chartColors = {
                blue: 'rgba(54, 162, 235, 0.6)',
                teal: 'rgba(20, 184, 166, 0.6)',
                blueBorder: 'rgba(54, 162, 235, 1)',
                tealBorder: 'rgba(20, 184, 166, 1)',
                grey: 'rgba(201, 203, 207, 0.6)',
                red: 'rgba(255, 99, 132, 0.6)',
                redBorder: 'rgba(255, 99, 132, 1)',
                backgrounds: ['#14B8A6', '#06B6D4', '#3B82F6', '#8B5CF6', '#F97316']
            };

            const chartInstances = {};

            // Navigation Logic
            const pages = {
                overview: document.getElementById('page-overview'),
                lifecycle: document.getElementById('page-lifecycle'),
                financials: document.getElementById('page-financials'),
            };
            const buttons = {
                overview: document.getElementById('btn-overview'),
                lifecycle: document.getElementById('btn-lifecycle'),
                financials: document.getElementById('btn-financials'),
            };

            function switchTab(tab) {
                Object.values(pages).forEach(page => page.classList.add('hidden'));
                Object.values(buttons).forEach(button => button.classList.remove('active'));
                pages[tab].classList.remove('hidden');
                buttons[tab].classList.add('active');
            }

            buttons.overview.addEventListener('click', () => switchTab('overview'));
            buttons.lifecycle.addEventListener('click', () => switchTab('lifecycle'));
            buttons.financials.addEventListener('click', () => switchTab('financials'));

            // Chart Default Options
            Chart.defaults.font.family = "'Inter', sans-serif";
            Chart.defaults.plugins.tooltip.backgroundColor = '#333D47';
            Chart.defaults.plugins.tooltip.titleFont.size = 14;
            Chart.defaults.plugins.tooltip.bodyFont.size = 12;
            Chart.defaults.plugins.legend.position = 'bottom';

            // --- Page 1: Overview Charts ---
            function initOverviewCharts() {
                // Funnel Chart
                const funnelCtx = document.getElementById('funnelChart').getContext('2d');
                chartInstances.funnel = new Chart(funnelCtx, {
                    type: 'bar',
                    data: {
                        labels: ['Applications', 'Offers', 'Accepted', 'Enrolled'],
                        datasets: [{
                            label: 'Count',
                            data: [85320, 42500, 21000, 12780],
                            backgroundColor: chartColors.backgrounds,
                            borderColor: '#ffffff',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false },
                            tooltip: {
                                callbacks: {
                                    label: function(context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        if (context.parsed.x !== null) {
                                            label += new Intl.NumberFormat().format(context.parsed.x);
                                        }
                                        const total = context.chart.data.datasets[0].data[0];
                                        const percentage = (context.parsed.x / total * 100).toFixed(1);
                                        return `${label} (${percentage}%)`;
                                    }
                                }
                            }
                        },
                        scales: {
                            x: {
                                beginAtZero: true,
                                grid: { display: false }
                            },
                            y: { grid: { display: false } }
                        }
                    }
                });

                // Enrolment Trend Chart
                const enrolmentCtx = document.getElementById('enrolmentTrendChart').getContext('2d');
                chartInstances.enrolment = new Chart(enrolmentCtx, {
                    type: 'line',
                    data: {
                        labels: ['2019', '2020', '2021', '2022', '2023'],
                        datasets: [{
                            label: 'International',
                            data: [3200, 3400, 3100, 3800, 4200],
                            backgroundColor: chartColors.teal,
                            borderColor: chartColors.tealBorder,
                            fill: true,
                            tension: 0.4
                        }, {
                            label: 'Domestic',
                            data: [4800, 5100, 5300, 5500, 5900],
                            backgroundColor: chartColors.blue,
                            borderColor: chartColors.blueBorder,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: { y: { stacked: true, beginAtZero: true } }
                    }
                });

                // Revenue Trend Chart
                const revenueCtx = document.getElementById('revenueTrendChart').getContext('2d');
                chartInstances.revenue = new Chart(revenueCtx, {
                    type: 'line',
                    data: {
                        labels: ['2019', '2020', '2021', '2022', '2023'],
                        datasets: [{
                            label: 'Undergraduate',
                            data: [350, 370, 380, 410, 450],
                            borderColor: chartColors.tealBorder,
                            tension: 0.3
                        }, {
                            label: 'Master\'s',
                            data: [280, 290, 310, 340, 380],
                            borderColor: chartColors.blueBorder,
                            tension: 0.3
                        }, {
                            label: 'PhD',
                            data: [80, 85, 90, 95, 105],
                            borderColor: chartColors.redBorder,
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { tooltip: { callbacks: { label: (c) => `${c.dataset.label}: $${c.raw}M` } } }
                    }
                });
            }

            // --- Page 2: Lifecycle Charts ---
            function initLifecycleCharts() {
                // Retention Chart
                const retentionCtx = document.getElementById('retentionChart').getContext('2d');
                chartInstances.retention = new Chart(retentionCtx, {
                    type: 'line',
                    data: {
                        labels: ['Year 1', 'Year 2', 'Year 3', 'Year 4'],
                        datasets: [{
                            label: 'Retention Rate',
                            data: [100, 92, 88, 85],
                            borderColor: chartColors.tealBorder,
                            backgroundColor: chartColors.teal,
                            yAxisID: 'y'
                        }, {
                            label: 'Dropout Rate',
                            data: [0, 8, 4, 3],
                            borderColor: chartColors.redBorder,
                            backgroundColor: chartColors.red,
                            yAxisID: 'y1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { type: 'linear', display: true, position: 'left', ticks: { callback: (v) => v + '%' } },
                            y1: { type: 'linear', display: true, position: 'right', grid: { drawOnChartArea: false }, ticks: { callback: (v) => v + '%' } }
                        }
                    }
                });

                // GPA Chart
                const gpaCtx = document.getElementById('gpaChart').getContext('2d');
                chartInstances.gpa = new Chart(gpaCtx, {
                    type: 'bar',
                    data: {
                        labels: ['<2.0', '2.0-2.5', '2.5-3.0', '3.0-3.5', '3.5-4.0'],
                        datasets: [{
                            label: 'Number of Students',
                            data: [50, 150, 450, 600, 350],
                            backgroundColor: chartColors.blue,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });

                // Lifecycle filters event listener
                ['filter-year', 'filter-level', 'filter-type', 'filter-mode'].forEach(id => {
                    document.getElementById(id).addEventListener('change', updateLifecycleVisuals);
                });
                updateLifecycleVisuals();
            }

            function updateLifecycleVisuals() {
                // Mock data update based on filters. In a real app, this would be an API call.
                const year = document.getElementById('filter-year').value;
                const seed = year.split('').reduce((a, b) => a + b.charCodeAt(0), 0);

                // Update Retention Chart
                chartInstances.retention.data.datasets[0].data = [100, 88 + (seed % 5), 82 + (seed % 4), 80 + (seed % 3)];
                chartInstances.retention.data.datasets[1].data = [0, 12 - (seed % 5), 6 - (seed % 4), 2 - (seed % 3)];
                chartInstances.retention.update();
                
                // Update GPA Chart
                chartInstances.gpa.data.datasets[0].data = [
                    20 + (seed % 10), 130 + (seed % 20), 400 + (seed % 50), 
                    550 - (seed % 50), 300 - (seed % 30)
                ];
                chartInstances.gpa.update();

                // Update Sankey diagram
                const offer = 100;
                const accepted = 70 + (seed % 10);
                const enrolled = accepted - (seed % 5);
                const retained = enrolled - 8 - (seed % 3);
                const graduated = retained - 5 - (seed % 4);
                document.getElementById('sankey-offer').textContent = `${offer.toFixed(0)}%`;
                document.getElementById('sankey-accepted').textContent = `${accepted.toFixed(0)}%`;
                document.getElementById('sankey-enrolled').textContent = `${enrolled.toFixed(0)}%`;
                document.getElementById('sankey-retained').textContent = `${retained.toFixed(0)}%`;
                document.getElementById('sankey-graduated').textContent = `${graduated.toFixed(0)}%`;
            }

            // --- Page 3: Financials Charts ---
            function initFinancialsCharts() {
                // Revenue Breakdown
                const breakdownCtx = document.getElementById('revenueBreakdownChart').getContext('2d');
                chartInstances.breakdown = new Chart(breakdownCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Undergraduate (Dom)', 'Undergraduate (Intl)', 'Master\'s (Dom)', 'Master\'s (Intl)', 'PhD'],
                        datasets: [{
                            data: [600, 450, 400, 380, 120],
                            backgroundColor: chartColors.backgrounds
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { tooltip: { callbacks: { label: (c) => `${c.label}: $${c.raw}M` } } }
                    }
                });

                // Scholarship Distribution
                const scholarshipCtx = document.getElementById('scholarshipDistChart').getContext('2d');
                chartInstances.scholarship = new Chart(scholarshipCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Business', 'Engineering', 'Arts & Humanities', 'Science', 'Medicine'],
                        datasets: [{
                            data: [15.2, 22.5, 8.1, 12.8, 8.5],
                            backgroundColor: chartColors.backgrounds
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { tooltip: { callbacks: { label: (c) => `${c.label}: $${c.raw}M` } } }
                    }
                });

                // Forecast Chart
                const forecastCtx = document.getElementById('forecastChart').getContext('2d');
                chartInstances.forecast = new Chart(forecastCtx, {
                    type: 'line',
                    data: {
                        labels: ['2021', '2022', '2023', '2024 (F)', '2025 (F)', '2026 (F)', '2027 (F)', '2028 (F)'],
                        datasets: [{
                            label: 'Historical Revenue',
                            data: [780, 845, 935, null, null, null, null, null],
                            borderColor: chartColors.blueBorder,
                            backgroundColor: chartColors.blue,
                            fill: false,
                            tension: 0.1
                        },{
                            label: 'Forecasted Revenue',
                            data: [null, null, 935, 980, 1025, 1070, 1110, 1150],
                            borderColor: chartColors.tealBorder,
                            backgroundColor: chartColors.teal,
                            borderDash: [5, 5],
                            fill: false,
                            tension: 0.1
                        }, {
                            label: 'Confidence Interval',
                            data: [null, null, null, 960, 1000, 1040, 1070, 1100],
                            fill: '+1',
                            backgroundColor: 'rgba(20, 184, 166, 0.1)',
                            borderColor: 'transparent',
                            pointRadius: 0,
                            tension: 0.1
                        }, {
                            label: 'Upper Bound',
                            data: [null, null, null, 1000, 1050, 1100, 1150, 1200],
                            backgroundColor: 'rgba(20, 184, 166, 0.1)',
                            borderColor: 'transparent',
                            pointRadius: 0,
                            tension: 0.1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { tooltip: { callbacks: { label: (c) => `${c.dataset.label}: $${c.raw}M` } } }
                    }
                });

                // Student Enrolment Forecast Chart
                const studentForecastCtx = document.getElementById('studentForecastChart').getContext('2d');
                chartInstances.studentForecast = new Chart(studentForecastCtx, {
                    type: 'line',
                    data: {
                        labels: ['2021', '2022', '2023', '2024 (F)', '2025 (F)', '2026 (F)', '2027 (F)', '2028 (F)'],
                        datasets: [{
                            label: 'Historical Enrolment',
                            data: [11500, 12100, 12780, null, null, null, null, null],
                            borderColor: chartColors.blueBorder,
                            backgroundColor: chartColors.blue,
                            fill: false,
                            tension: 0.1
                        },{
                            label: 'Forecasted Enrolment',
                            data: [null, null, 12780, 13200, 13700, 14100, 14500, 14800],
                            borderColor: chartColors.tealBorder,
                            backgroundColor: chartColors.teal,
                            borderDash: [5, 5],
                            fill: false,
                            tension: 0.1
                        }, {
                            label: 'Confidence Interval',
                            data: [null, null, null, 13000, 13400, 13800, 14100, 14400],
                            fill: '+1',
                            backgroundColor: 'rgba(20, 184, 166, 0.1)',
                            borderColor: 'transparent',
                            pointRadius: 0,
                            tension: 0.1
                        }, {
                            label: 'Upper Bound',
                            data: [null, null, null, 13400, 14000, 14400, 14900, 15200],
                            backgroundColor: 'rgba(20, 184, 166, 0.1)',
                            borderColor: 'transparent',
                            pointRadius: 0,
                            tension: 0.1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { 
                            tooltip: { 
                                callbacks: { 
                                    label: (c) => `${c.dataset.label}: ${new Intl.NumberFormat().format(c.raw)} students` 
                                } 
                            } 
                        }
                    }
                });
            }

            // Initialize all charts
            initOverviewCharts();
            initLifecycleCharts();
            initFinancialsCharts();
        });
    </script>
</body>
</html>

